@{
    ViewData["Title"] = "Список шаблонов";
}

@section Styles {
}

@section Scripts {
    <script src="~/vendor/libs/masonry/masonry.js"></script>

    <script src="~/js/template-list.js"></script>
}

<section id="template-list-vue">

    <h4 class="d-flex flex-wrap w-100 font-weight-bold pt-2 mb-4">
        <div class="lnr lnr-layers display-4 text-primary mr-2"></div>
        <div class="px-0 pb-2 pt-2">
            Шаблоны
        </div>
        <span class="px-0 pb-2 ml-4">
            <a class="btn btn-outline-primary rounded-pill" href="/Template/Edit"> Добавить новый шаблон</a>
        </span>
    </h4>

    <ul class="nav container-m-nx bg-lighter container-p-x py-1 mb-4">
        <li class="nav-item">
            <a v-bind:class="['nav-link', activeTemplatePeriodTypeID == -1 ? 'font-weight-bold pl-0 text-body':'text-muted']" href="javascript:void(0)"
               v-on:click="activeTemplatePeriodTypeID = -1; reload()">Все шаблоны</a>
        </li>
        <li class="nav-item">
            <a v-bind:class="['nav-link', activeTemplatePeriodTypeID == 1 ? 'font-weight-bold pl-0 text-body':'text-muted']" href="javascript:void(0)"
               v-on:click="activeTemplatePeriodTypeID = 1; reload()">По дням</a>
        </li>
        <li class="nav-item">
            <a v-bind:class="['nav-link', activeTemplatePeriodTypeID == 3 ? 'font-weight-bold pl-0 text-body':'text-muted']" href="javascript:void(0)"
               v-on:click="activeTemplatePeriodTypeID = 3; reload()">По месяцам</a>
        </li>
    </ul>

    <div class="row" id="templates">
        <div class="col-sm-6 col-xl-4 pt-5 masonry-item-sizer position-absolute"></div>
        <div class="col-sm-6 col-xl-4 masonry-item" v-for="template in templates"
             v-bind:class="template.isShow && (activeTemplatePeriodTypeID == -1 || template.periodTypeID == activeTemplatePeriodTypeID) ? '' : 'd-none'">
            <div class="card mb-4 border-primary custom-card-hover" v-bind:id="'template_' + template.id" v-if="template.isDeleted == false">
                <div class="card-body d-flex justify-content-between align-items-start pb-3">
                    <div>
                        <a v-bind:href="'/Template/Edit/'+ template.id" class="text-body text-big font-weight-semibold" title="Реактировать">{{ template.name }}</a>
                        <i class="ion ion-ios-star " v-if="template.isDefault" title="Шаблон по умолчанию" style="font-size: large; color: var(--orange);"></i>
                        <i class="ion ion-ios-star-outline" v-else="template.isDefault" title="Шаблон не по умолчанию" style="font-size: large;"></i>
                        <div class="text-muted small mt-1"> {{ template.columns.length }} {{ getRusName(template.columns.length) }}</div>
                    </div>
                    <div class="btn-group project-actions">
                        <span class="badge badge-success align-text-bottom ml-1" v-show="template.periodTypeID == 1">{{ template.periodName }}</span>
                        <span class="badge badge-info align-text-bottom ml-1" v-show="template.periodTypeID == 3">{{ template.periodName }}</span>
                    </div>
                </div>
                <div class="card-body pb-3">
                    {{ template.description }}
                </div>
                <hr class="m-0">
                <div class="card-footer py-3">
                    <a class="btn btn-primary btn-sm" v-bind:href="'/Template/Edit/'+ template.id">
                        <i class="far fa-edit pr-2"></i>Редактировать
                    </a>
                    <a class="btn icon-btn btn-sm btn-outline-secondary" v-bind:href="getLinkForView(template)" title="Посмотреть">
                        <i class="far fa-eye"></i>
                    </a>
                    <a href="void:javascript(0)" title="Удалить" class="btn icon-btn btn-sm btn-outline-secondary" v-on:click="remove(template)">
                        <span class="ion ion-md-trash"></span>
                    </a>
                </div>
            </div>
            <div class="card mb-4 custom-card-hover border-secondary" v-bind:id="'template_' + template.id" v-if="template.isDeleted">
                <div class="card-body d-flex justify-content-between align-items-start pb-3 deleted-item">
                    <div>
                        <a href="javascript:void(0) " class="text-body text-big font-weight-semibold">{{ template.name }}</a>
                        <i class="ion ion-ios-star " v-if="template.isDefault" title="Шаблон по умолчанию" style="font-size: large; color: var(--orange);"></i>
                        <i class="ion ion-ios-star-outline" v-else="template.isDefault" title="Шаблон не по умолчанию" style="font-size: large;"></i>
                        <div class="text-muted small mt-1"> {{ template.columns.length }} {{ getRusName(template.columns.length) }}</div>
                    </div>
                    <div class="btn-group project-actions">
                        <span class="badge badge-success align-text-bottom ml-1" v-show="template.periodTypeID == 1">{{ template.periodName }}</span>
                        <span class="badge badge-info align-text-bottom ml-1" v-show="template.periodTypeID == 3">{{ template.periodName }}</span>
                    </div>
                </div>
                <div class="card-body pb-3 deleted-item">
                    {{ template.description }}
                </div>
                <hr class="m-0">
                <div class="card-footer py-3">
                    <a href="javascript:void(0)" class="btn btn-success btn-sm" v-on:click="recovery(template)">
                        <i class="fa fa-undo pr-2"></i>Восстановить
                    </a>
                </div>
            </div>
        </div>
    </div>

    <hr class="border-light mt-2 mb-4">

    @*
            pages
            <nav>
            <ul class="pagination justify-content-center">
                <li class="page-item disabled">
                    <a class="page-link" href="javascript:void(0)">«</a>
                </li>
                <li class="page-item active">
                    <a class="page-link" href="javascript:void(0)">1</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="javascript:void(0)">2</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="javascript:void(0)">3</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="javascript:void(0)">4</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="javascript:void(0)">5</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="javascript:void(0)">»</a>
                </li>
            </ul>
        </nav>*@

</section>