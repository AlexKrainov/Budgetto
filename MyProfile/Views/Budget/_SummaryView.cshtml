
<div class="col-md-12 px-1">
    <div class="card mb-2">
        <div id="summary-view" class="row no-gutters row-bordered"
             v-show="summary.isShow">
            <div class="col-lg-3">

                <div class="card-body pt-3 pb-1">
                    <div class="text-muted small">
                        Всего на всех счетах
                        <i class="fas fa-info-circle cursor-help text-danger" data-toggle="tooltip" data-html="true"
                           v-show="summary.allAccountsMoney.convertError"
                           title="Не удалось конвертировать некоторые счета"></i>
                    </div>
                    <div class="text-xlarge" style="display: inline-block"
                         v-if="summary.currencySpecificCulture">
                        {{ new Intl.NumberFormat(summary.currencySpecificCulture, { style: 'currency', currency: summary.currencyCodeName }).format(summary.allAccountsMoney.balance) }}
                        @*<small><sup class="text-success">+11.25%</sup></small>*@
                    </div>
                    @*<div class="col-md-8" style="display:inline-block; width: 60%; height: 50px;">
                            <canvas id="statistics-chart-14"></canvas>
                        </div>*@
                </div>

            </div>
            <div class="col-lg-5">

                <div class="card-body pt-3 pb-1">
                    <div class="row">
                        <div class="col-md-6" style="display: inline-block"
                             v-if="summary.currencySpecificCulture">
                            <div class="text-muted small">
                                Денежный поток
                                <i class="fas fa-info-circle cursor-help" data-toggle="tooltip" data-html="true"
                                   title="[Доходы] - [Расходы] <p>С помощью этого показателя вы можете определить не выходите ли вы за рамки бюджета в данном месяце/годе</p>"></i>
                            </div>
                            <span class=" text-xlarge"
                                  v-bind:class="summary.cashFlow.balance >= 0 ? 'text-success': 'text-danger'">
                                {{ new Intl.NumberFormat(summary.currencySpecificCulture, { style: 'currency', currency: summary.currencyCodeName }).format(summary.cashFlow.balance) }}
                            </span>
                            @*<small><sup class="text-success">+11.25%</sup></small>*@
                        </div>
                        <div class="col-md-6 col-sm-1 col-xs-1" style="display:inline-block; width: 60%; height: 50px;">
                            <canvas id="chashFlowChart" width="100" height="50"></canvas>
                        </div>
                    </div>
                </div>

            </div>
            <div class="col-lg-4">
                <div class="card-body row py-3">
                    <div class="col-lg-12">
                        <span class="text-muted small">
                            Рабочих часов / дней
                        </span>
                        <span class="float-right">
                            {{ summary.earningsPerHour.allWorkHours }} / {{ summary.earningsPerHour.allWorkDays }}
                        </span>
                    </div>
                    <div class="col-lg-12">
                        <span class="text-muted small">
                            Доходы в рабочий час / день
                            <i class="fas fa-info-circle cursor-help" data-toggle="tooltip" data-html="true"
                               title="Из расчета для часов: <br />[Доход] / [Количество рабочих часов] <br /> Из расчета для дней: <br />[Доход] / [Количество рабочих дней]"></i>
                        </span>
                        <span class="float-right"
                              v-bind:class="summary.earningsPerHour != undefined && summary.earningsPerHour.balancePerHour > 0 ? 'text-success' : ''"
                              v-if="summary.currencySpecificCulture">
                            {{ new Intl.NumberFormat(summary.currencySpecificCulture, { style: 'currency', currency: summary.currencyCodeName }).format(summary.earningsPerHour.balancePerHour) }} /
                            {{ new Intl.NumberFormat(summary.currencySpecificCulture, { style: 'currency', currency: summary.currencyCodeName }).format(summary.earningsPerHour.balancePerDay) }}
                        </span>
                    </div>

                    <div class="col-lg-12">
                        <span class="text-muted small">
                            Расходы в час / день
                            <i class="fas fa-info-circle cursor-help" data-toggle="tooltip" data-html="true"
                               title="Из расчета для часов: <br />[Расходы] / [Количество всех часов до сегодняшнего дня] <br /> Из расчета для дней: <br />[Расходы] / [Количество всех дней до сегодняшнего дня]"></i>
                        </span>
                        <span class="float-right text-danger"
                              v-if="summary.currencySpecificCulture">
                            {{ new Intl.NumberFormat(summary.currencySpecificCulture, { style: 'currency', currency: summary.currencyCodeName }).format(summary.expensesPerDay.balancePerHour) }} /
                            {{ new Intl.NumberFormat(summary.currencySpecificCulture, { style: 'currency', currency: summary.currencyCodeName }).format(summary.expensesPerDay.balancePerDay) }}
                        </span>
                    </div>
                    @*<div class="col-lg-6 text-muted small ">Обязательств в месяц</div><div class="col-lg-6 text-danger">12 000 ₽</div>*@
                </div>

            </div>
        </div>
        <div id="accounts-view" class="row no-gutters row-bordered" style="overflow: inherit; border-top: 1px solid lightgray;"
             v-show="accounts && accounts.length > 0 && accounts[0].isShow">
            @*&& accounts.some(x => x.isShow)*@
            <div style=" border: 1px solid;" v-for="account in accounts"
                 v-bind:id="'account_'+ account.id"
                 v-bind:class="[account.isHide ? 'col-lg-1 border-light' : 'col-lg-3 border-light', account.isDeleted ? 'deleted-item': '' ]">

                <div class="card-body d-flex align-items-center py-3 px-3" style="padding-bottom: 15px !important; "
                     v-if="!account.isHide">
                    <div class="ui-feed-icon-container d-inline-block"
                         v-bind:class="account.accountType != 1 && account.bankImage ? 'mr-2': ''">
                        <span class="ui-icon ui-feed-icon ion ion-md-star bg-success text-white" data-toggle="tooltip" title="Счет по умолчанию"
                              v-if="account.isDefault"></span>
                        <img v-show="account.accountType != 1 && account.bankImage" v-bind:src="account.bankImage" v-bind:alt="account.bankName" class="ui-w-40 rounded-circle">
                        <span v-show="account.accountType == 1 || (account.accountType != 1 && !account.bankImage)" class="ui-icon ui-statistics-icon text-primary"
                              v-bind:class="account.accountIcon"></span>
                    </div>
                    <div class="ml-3">
                        <div class="text-muted small">{{ account.name }}</div>
                        <div v-show="account.isPast == false"
                             v-bind:class="account.balance < 0 ? 'text-danger' : ''">
                            <span class="text-large">
                                {{ new Intl.NumberFormat(account.currency.specificCulture, { style: 'currency', currency: account.currency.codeName }).format(account.balance) }}
                            </span>
                            <span class="float-right text-success"
                                  v-show="account.isCachback">
                                ≈{{ new Intl.NumberFormat(account.currency.specificCulture, { style: 'currency', currency: account.currency.codeName }).format(account.cachBackBalance) }}
                            </span>
                        </div>
                        <div class="text-muted small" title="Конец срока действия карты"
                             v-show="account.isPast == false">{{ getDateByFormat(account.expirationDate, 'MMMM YYYY') }}</div>
                    </div>

                    <button type="button" data-toggle="dropdown" aria-expanded="false"
                            class="btn btn-sm btn-default icon-btn borderless rounded-pill md-btn-flat dropdown-toggle hide-arrow"
                            style="position: absolute;right: 10px;top: 5px;"
                            v-show="!account.isDeleted">
                        <i class="ion ion-ios-more"></i>
                    </button>
                    <i class="fa fa-undo pl-2 float-right text-success cursor-pointer"
                       style="position: absolute;right: 13px;top: 13px;"
                       v-show="account.isDeleted"
                       v-on:click="removeOrRecoveryAccount(account)"></i>
                    <div class="dropdown-menu dropdown-menu-right">
                        <a class="dropdown-item" href="javascript:void(0)"
                           v-on:click="editAccount(account)">Редактировать счет</a>
                        <a class="dropdown-item" href="javascript:void(0)"
                           v-on:click="transferMoney(account.id)">Перевести деньги</a>
                        <a class="dropdown-item" href="javascript:void(0)"
                           v-on:click="showHideAccount(account, true)">Скрыть счет</a>
                        <a class="dropdown-item text-danger" href="javascript:void(0)"
                           v-on:click="removeOrRecoveryAccount(account)">Удалить счет</a>
                    </div>
                </div>
                <div class="card-body d-flex align-items-center py-3" style="padding-bottom: 15px !important; "
                     v-else-if="account.isHide">
                    <div class="ui-feed-icon-container d-inline-block">
                        <span class="ui-icon ui-feed-icon ion ion-md-star bg-success text-white" data-toggle="tooltip" title="Счет по умолчанию"
                              v-if="account.isDefault"></span>
                        <img class="ui-w-40 rounded-circle" data-toggle="tooltip"
                             v-show="account.accountType != 1 && account.bankImage"
                             v-bind:src="account.bankImage"
                             v-bind:alt="account.bankName"
                             v-bind:title="account.name">
                        <span class="ui-icon ui-statistics-icon text-primary" data-toggle="tooltip"
                              v-show="account.accountType == 1 || (account.accountType != 1 && !account.bankImage)"
                              v-bind:class="account.accountIcon"
                              v-bind:title="account.name"></span>
                    </div>
                    <button type="button" data-toggle="dropdown" aria-expanded="false"
                            class="btn btn-sm btn-default icon-btn borderless rounded-pill md-btn-flat dropdown-toggle hide-arrow"
                            v-if="!account.isDeleted"
                            style="position: absolute;right: 10px;top: 5px;">
                        <i class="ion ion-ios-more"></i>
                    </button>
                    <i class="fa fa-undo pl-2 float-right text-success cursor-pointer"
                       style="position: absolute;right: 13px;top: 13px;"
                       v-else-if="account.isDeleted"
                       v-on:click="removeOrRecoveryAccount(account)"></i>
                    <div class="dropdown-menu dropdown-menu-right">
                        <a class="dropdown-item" href="javascript:void(0)"
                           v-on:click="editAccount(account)">Редактировать счет</a>
                        <a class="dropdown-item" href="javascript:void(0)"
                           v-on:click="transferMoney(account.id)">Перевести деньги</a>
                        <a class="dropdown-item" href="javascript:void(0)"
                           v-on:click="showHideAccount(account, false)">Показывать счет</a>
                        <a class="dropdown-item text-danger" href="javascript:void(0)"
                           v-on:click="removeOrRecoveryAccount(account)">Удалить счет</a>
                    </div>

                </div>
                <div class="card-footer small"
                     v-show="account.isPast && account.isHide == false">
                    <div class="text-secondary">Итого с этого счета за данный период</div>
                    <div>
                        <span class="float-right text-success">
                            {{ new Intl.NumberFormat(account.currency.specificCulture, { style: 'currency', currency: account.currency.codeName }).format(account.balanceEarnings) }}
                        </span>
                        Доходы
                    </div>
                    <div>
                        <span class="float-right text-danger">
                            {{ new Intl.NumberFormat(account.currency.specificCulture, { style: 'currency', currency: account.currency.codeName }).format(account.balanceSpendings) }}
                        </span>
                        Расходы
                    </div>
                    <div>
                        <span class="float-right">
                            {{ new Intl.NumberFormat(account.currency.specificCulture, { style: 'currency', currency: account.currency.codeName }).format(account.balanceInvestments) }}
                        </span>
                        Инвестиции
                    </div>
                    <div v-show="account.isCachback">
                        <span class="float-right text-success">
                            {{ new Intl.NumberFormat(account.currency.specificCulture, { style: 'currency', currency: account.currency.codeName }).format(account.balancePastCachback) }}
                        </span>
                        Кешбек
                    </div>
                </div>
            </div>
            <div class="col-lg-1">
                <div class="card-body d-flex justify-content-center align-items-center pt-3" style=" padding-bottom: 15px !important;">
                    <span class="ui-icon ui-statistics-icon ion ion-md-add text-primary cursor-pointer" title="Добавить счет"
                          v-on:click="editAccount(undefined)"></span>
                </div>
            </div>
        </div>
    </div>
</div>
