/*!
*
* ColorPick jQuery plugin
* https://github.com/philzet/ColorPick.js
*
* Copyright (c) 2017-2019 Phil Zet (a.k.a. Phil Zakharchenko)
* Licensed under the MIT License
*
*/
(function(n){n.fn.colorPick=function(t){return this.each(function(){new n.colorPick(this,t||{})})};n.colorPick=function(t,i){var u,r;return i=i||{},this.options=n.extend({},n.fn.colorPick.defaults,i),i.str&&(this.options.str=n.extend({},n.fn.colorPick.defaults.str,i.str)),n.fn.colorPick.defaults=this.options,this.color=this.options.initialColor.toUpperCase(),this.element=n(t),u=this.element.data("initialcolor"),u&&(this.color=u,this.appendToStorage(this.color)),r=[],n.each(n.fn.colorPick.defaults.palette.map(function(n){return n.toUpperCase()}),function(t,i){n.inArray(i,r)===-1&&r.push(i)}),this.palette=r,this.localizationColor=n.fn.colorPick.defaults.localizationColor,this.element.hasClass(this.options.pickrclass)?this:this.init()};n.fn.colorPick.defaults={initialColor:"#3498db",paletteLabel:"Выбор цвета:",allowRecent:!1,recentMax:5,allowCustomColor:!1,palette:["#e2f7e7","#c5efcf","#a7e7b7","#5df192","#e3edf9","#c6dbf3","#a9caed","#5bb4f9","#fff5dc","#ffeab9","#ffe196","#fcd772","#ffe2dc","#ffc6ba","#ffa999","#f98c79","#ecf0f1","#bdc3c7","#95a5a6","#7f8c8d"],localizationColor:[],onColorSelected:function(){this.element.css({backgroundColor:this.color,color:this.color})}};n.colorPick.prototype={init:function(){var t=this,i=this.options;n.proxy(n.fn.colorPick.defaults.onColorSelected,this)();this.element.click(function(i){return i.preventDefault(),t.show(i.pageX,i.pageY),n(".customColorHash").val(t.color),n(".colorPickButton").click(function(i){return t.color=n(i.target).attr("hexValue"),t.appendToStorage(n(i.target).attr("hexValue")),t.hide(),n.proxy(t.options.onColorSelected,t)(),!1}),n(".customColorHash").click(function(){return!1}).keyup(function(){var i=n(this).val();i.indexOf("#")!==0&&(i="#"+i);/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(i)?(t.color=i,t.appendToStorage(i),n.proxy(t.options.onColorSelected,t)(),n(this).removeClass("error")):n(this).addClass("error")}),!1}).blur(function(){return t.element.val(t.color),n.proxy(t.options.onColorSelected,t)(),t.hide(),!1});n(document).on("click",function(){return t.hide(),!0});return this},appendToStorage:function(t){if(n.fn.colorPick.defaults.allowRecent===!0){var i=JSON.parse(localStorage.getItem("colorPickRecentItems"));i==null&&(i=[]);n.inArray(t,i)==-1&&(i.unshift(t),i=i.slice(0,n.fn.colorPick.defaults.recentMax),localStorage.setItem("colorPickRecentItems",JSON.stringify(i)))}},show:function(t,i){n("#colorPick").remove();n("body").append('<div id="colorPick" style="display:none;top:'+i+"px;left:"+t+'px"><span>'+n.fn.colorPick.defaults.paletteLabel+"<\/span><\/div>");for(var r=0;r<this.palette.length;r++){let t=this.palette[r],u="",i=this.localizationColor.find(n=>n.ColorCode.toUpperCase()==t);i&&i.ColorName&&(u=i.ColorName);n("#colorPick").append('<div title="'+u+'" class="colorPickButton" hexValue="'+t+'" style="background:'+t+'"><\/div>')}n.fn.colorPick.defaults.allowCustomColor===!0&&n("#colorPick").append('<input type="text" style="margin-top:5px" class="customColorHash" />');n.fn.colorPick.defaults.allowRecent===!0&&(n("#colorPick").append('<span style="margin-top:5px">:<\/span>'),JSON.parse(localStorage.getItem("colorPickRecentItems"))==null||JSON.parse(localStorage.getItem("colorPickRecentItems"))==[]?n("#colorPick").append('<div class="colorPickButton colorPickDummy"><\/div>'):jQuery.each(JSON.parse(localStorage.getItem("colorPickRecentItems")),function(t,i){return n("#colorPick").append('<div class="colorPickButton" hexValue="'+i+'" style="background:'+i+'"><\/div>'),t==n.fn.colorPick.defaults.recentMax-1?!1:void 0}));n("#colorPick").fadeIn(200)},hide:function(){n("#colorPick").fadeOut(200,function(){return n("#colorPick").remove(),this})}}})(jQuery);