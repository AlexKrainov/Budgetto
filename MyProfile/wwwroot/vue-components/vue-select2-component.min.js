Vue.component("vue-select2-component",{template:`<select :id="dataId" :name="dataName" :class="dataClass" :style="dataStyle"  v-model="selected" v-on:click="onchange"></select>`,props:{dataId:String,dataTitle:String,items:Array,dataSelectedItems:Array,selectedPropertyName:String,metadata:Array,url:String,value:[Array,Object],dataWidth:String,dataStyle:{type:String,"default":"width: 100%"},dataClass:{type:String,"default":"form-control"},language:{type:String},multiple:{type:Boolean,"default":!0},minimumInputLength:{type:Number,"default":3},isSaveLocalstorage:{type:Boolean,"default":!0},postParams:Object,childRelatedSelectId:String,onSelected:[Event,Function],onUnselected:[Event,Function]},watch:{value:function(n){if($(this.$el).attr("isUpdated")==!0||$(this.$el).attr("isUpdated")=="true"){$(this.$el).removeAttr("isUpdated");return}if(n!=null){if(n.id!=undefined){this.items==undefined?$(this.$el).attr("isUpdated",!0).find("option").remove().end().append('<option value="'+n.id+'">'+(n[this.selectedPropertyName]||n[t].text||n[t].id)+"<\/option>").val(n.id).trigger("change"):$(this.$el).attr("isUpdated",!0).val(n.id).trigger("change");return}if(n.length>0){let r="",i=[];for(var t=0;t<n.length;t++)r+='<option value="'+n[t].id+'">'+(n[t][this.selectedPropertyName]||n[t].text||n[t].id)+"<\/option>",i.push(n[t].id);this.items==undefined?$(this.$el).attr("isUpdated",!0).find("option").remove().end().append(r).val(i).trigger("change"):$(this.$el).attr("isUpdated",!0).val(i).trigger("change");return}this.items==undefined?$(this.$el).attr("isUpdated",!0).find("option").remove().end().trigger("change"):$(this.$el).attr("isUpdated",!0).trigger("change");return}}},computed:{dataName:function(){return this.multiple==!0?this.dataId+"[]":this.dataId},selectedItems:function(){let n=localStorage.getItem(this.localStorageString);return this.isSaveLocalstorage==!0&&n?JSON.parse(n):this.dataSelectedItems!=undefined&&this.dataSelectedItems.length>0&&this.dataSelectedItems[0]!=""?this.dataSelectedItems:undefined},placeholder:function(){let n="";if(this.metadata&&this.metadata.length>0){for(var t=0;t<this.metadata.length;t++)this.metadata[t].isPlaceholder==!0&&(n+=this.metadata[t].text+", ");n.length>2&&(n=n.substring(0,n.length-2))}return n},localStorageString:function(){return window.location.pathname+"#"+this.dataId}},data:function(){return{selected:this.value,isPostBack:!1}},mounted:function(){let n=this,t=$(this.$el).select2({ajax:this.items!=undefined?null:{url:this.url,type:"GET",dataType:"json",delay:350,data:function(t){let u={searchString:t.term,page:t.page||1},i=$.extend(!0,n.postParams,u);for(var r in i)(i[r]==null||i[r]==undefined)&&delete i[r];return i},processResults:function(n,t){return t.page=t.page||1,{results:n.items,pagination:{more:t.page*20<n.count}}},cache:!0},matcher:this.items==undefined?null:this.customSearch,width:this.dataWidth,data:this.items||this.selectedItems,multiple:this.multiple,language:this.language,placeholder:"",allowClear:!0,escapeMarkup:function(n){return n},minimumInputLength:this.minimumInputLength,templateResult:this.templateResult,templateSelection:this.templateSelection}).change(this.changeSelection).on("select2:select",function(t){if(typeof n.onSelected=="function")n.onSelected(t)}).on("select2:unselect",function(t){if(typeof n.onUnselected=="function")n.onUnselected(t)});this.selectedItems&&t.val(this.selectedItems?this.selectedItems.map(n=>n.id):undefined).trigger("change");this.minimumInputLength<1&&t.parent().find(".select2-search__field").click(function(n){n.stopPropagation();t.parent().find(".select2-selection__rendered").click()});this.placeholder&&this.placeholder.length>3&&$(n.$el.parentElement).after('<span class="text-muted m-b block text-placeholder" style="margin-top:-15px;">'+this.placeholder+"<\/span>");!this.selectedItems&&this.items&&t.val(null).trigger("change")},methods:{customSearch:function(n,t){let i=n.term;if(!i)return t;if(n._type&&n._type==="query"){i=i.replaceAll(" ","").toLocaleLowerCase();for(const n in t)if(t.hasOwnProperty(n)&&n!=="element"&&t[n]){let r=t[n].toString().replaceAll(" ","").toLocaleLowerCase();if(r.indexOf(i)!=-1)return t}}return null},templateResult:function(n){var i,t;if(n.loading==!0)return n.text;for(i="<div class='clearfix select2-result-block-container'>",t=0;t<this.metadata.length;t++)if(this.metadata[t].isLogo){let t=n[this.metadata.filter(n=>n.isLogo)[0].propertyName];t&&(i+="<img src='"+t+"' style='height: 30px;' alt='' class='mr-2'>")}else this.metadata[t].isOption==!0&&n[this.metadata[t].propertyName]&&(i+="<div class='select2-result-block display-inline'>"+(this.metadata[t].text?"<span class='select2-option-title small text-muted'>"+this.metadata[t].text+":<\/span> ":"")+"<span class='select2-option-value'>"+n[this.metadata[t].propertyName]+"<\/span><\/div> <br />");return i+="<\/div>"},templateSelection:function(n){return this.selectedPropertyName!=undefined&&$(n.element).attr("selected-property-name",n[this.selectedPropertyName]),n[this.selectedPropertyName]||n.text||n.id},changeSelection:function(){if(console.log("change"),this.isSaveLocalstorage==!0&&this.isPostBack==!1){let i=[],t=$(this.$el).select2("data");for(var n=0;n<t.length;n++)i.push({id:t[n].id,text:t[n][this.selectedPropertyName]||t[n].text});localStorage.setItem(this.localStorageString,JSON.stringify(i))}this.isPostBack=!1;this.childRelatedSelectId&&$("#"+this.childRelatedSelectId).val("").trigger("change")},onchange:function(){this.$emit("input",this.value)},refresh:function(n){this.value=n;$(this.$el).val(this.value?this.value.map(n=>n.id):this.value).trigger("change")},addSelectedOption:function(n){let r="",u=$(this.$el).find("option").map((n,t)=>({id:t.value,text:t.text})).toArray(),i=$(this.$el).find("option:selected").map((n,t)=>t.value).toArray();for(var t=0;t<n.length;t++)if(u.length==0||i.findIndex(i=>i==n[t].id)==-1){let f=n[t][this.selectedPropertyName]||n[t].text||n[t].id;u.findIndex(i=>i.id==n[t].id)==-1&&(r+='<option value="'+n[t].id+'" selected-property-name="'+f+'">'+f+"<\/option>");i.push(n[t].id)}r!=""?$(this.$el).append(r).val(i).trigger("change"):$(this.$el).val(i).trigger("change")}}});