var GoalAddMoneyVue=new Vue({el:"#goal-add-money",data:{goal:{},flatpickrStart:{},record:{},isSaving:!1,showHistoryItems:0,isShowButtonHistoryItems:!0,isGanaral:!0},methods:{getDateByFormat:function(n,t){return GetDateByFormat(n,t)},addMoney:function(n,t){this.record={goalID:n.id,dateTimeOfPayment:GetDateByFormat(moment(),"YYYY/MM/DD")};this.showHistoryItems=0;this.isGanaral=t==!0?!1:!0;this.goal=n;this.showHistory(10);let i=GetFlatpickrRuConfig(this.record.dateTimeOfPayment,GetDateByFormat(n.dateStart,"YYYY/MM/DD"),GetDateByFormat(n.dateEnd,"YYYY/MM/DD"));this.flatpickrStart=flatpickr("#dateTimeOfPayment",i);$("#goal-add-money").modal("show")},saveMoney:function(){if(this.checkAddForm()==!1)return!1;this.isSaving=!0;sendAjax("/Goal/SaveRecord",this.record,"POST").then(function(n){n.isOk==!0?(typeof GoalListVue=="object"?GoalListVue.load():typeof BudgetVue=="object"&&BudgetVue.refresh("onlyGoal"),$("#goal-add-money").modal("hide")):console.log(n.message);GoalAddMoneyVue.isSaving=!1})},checkAddForm:function(n){let t=!0;return this.record.dateTimeOfPayment&&this.record.dateTimeOfPayment.length>0?$("#dateTimeOfPayment").next().removeClass("is-invalid"):(t=!1,$("#dateTimeOfPayment").next().addClass("is-invalid")),this.record.total&&(this.record.total>0||this.record.total.length>0)?$("#record-total").removeClass("is-invalid"):(t=!1,$("#record-total").addClass("is-invalid")),t==!1&&n&&n.preventDefault(),t},showHistory:function(n){this.showHistoryItems+=n;for(var t=0;t<this.goal.records.length;t++){if(this.showHistoryItems==t)return;this.goal.records[t].isShow=!0}this.isShowButtonHistoryItems=!1}}});