var GoalEditVue=new Vue({el:"#goal-edit-vue",data:{goal:{},flatpickrStart:{},flatpickrEnd:{},record:{},isSaving:!1},watch:{},mounted:function(){},methods:{getDateByFormat:function(n,t){return GetDateByFormat(n,t)},edit:function(n){n?this.goal=JSCopyObject(n):(this.goal={isShow_BudgetMonth:!0,isShow_BudgetYear:!0},this.goal.dateStart=GetDateByFormat(moment(),"YYYY/MM/DD"));let t=GetFlatpickrRuConfig(this.goal.dateStart);t.onChange=function(n,t){console.log(t);GoalEditVue.flatpickrEnd.config.minDate=t};let i=GetFlatpickrRuConfig(this.goal.dateEnd);i.onChange=function(n,t){GoalEditVue.flatpickrStart.config.maxDate=t};this.flatpickrStart=flatpickr("#date-start",t);this.flatpickrEnd=flatpickr("#date-end",i);$("#modal-goal").modal("show")},saveGoal:function(){return this.checkForm()==!1?!1:(this.isSaving=!0,sendAjax("/Goal/Save",this.goal,"POST").then(function(n){if(n.isOk==!0){GoalListVue.load();let t=GoalListVue.goals.findIndex(t=>t.id==n.goal.id);t>=0?GoalListVue.goals[t]=n.goal:(GoalListVue.goals.push(n.goal),setTimeout(function(){GoalListVue.msnry.addItems($("div[data-id=goal_"+n.goal.id+"]"));GoalListVue.msnry.layout()},100));$("#modal-goal").modal("hide")}else console.log(n.message);GoalEditVue.isSaving=!1}))},checkForm:function(n){let t=!0;this.goal.dateStart&&this.goal.dateStart.length>0?$("#date-start").next().removeClass("is-invalid"):(t=!1,$("#date-start").next().addClass("is-invalid"));this.goal.name&&this.goal.name.length>0?$("#goal-name").removeClass("is-invalid"):(t=!1,$("#goal-name").addClass("is-invalid"));let i=this.goal.name;return i=i?i.replaceAll(" ",""):"",i.length==0?(t=!1,$("#goal-name").addClass("is-invalid")):$("#goal-name").removeClass("is-invalid"),this.goal.expectationMoney&&this.goal.expectationMoney>0?$("#goal-expectationMoney").removeClass("is-invalid"):(t=!1,$("#goal-expectationMoney").addClass("is-invalid")),t==!1&&n&&n.preventDefault(),t},addMoney:function(n,t){GoalAddMoneyVue.addMoney(n,t)}}});