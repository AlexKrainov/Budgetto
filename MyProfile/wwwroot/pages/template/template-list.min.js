var TemplateListVue=new Vue({el:"#template-list-vue",data:{templates:[],activeTemplatePeriodTypeID:-1,search:null,msnry:{}},watch:{search:function(n){n||this.templates.forEach(function(n){n.isShow=!0});for(var t=0;t<this.templates.length;t++)this.templates[t].isShow=this.templates[t].name.indexOf(n)>=0}},mounted:function(){this.init().then(function(){TemplateListVue.msnry=new Masonry("#templates",{itemSelector:".masonry-item:not(.d-none)",columnWidth:".masonry-item-sizer",originLeft:!0,horizontalOrder:!0})})},methods:{init:function(){return sendAjax("/Template/GetTemplates",null,"GET").then(function(n){n.isOk==!0&&(TemplateListVue.templates=n.templates)})},getLinkForView:function(n){return GetLinkForView(n)},getDateByFormat:function(n,t){return GetDateByFormat(n,t)},reload:function(){setTimeout(function(){TemplateListVue.msnry.layout()},15)},getRusName:function(n){return GetRusName(n,["Колонка","Колонки","Колонок"])},remove:function(n){return ShowLoading("#template_"+n.id),$.ajax({type:"POST",url:"/Template/Remove",data:JSON.stringify(n),context:n,contentType:"application/json",dataType:"json",success:function(t){n.isDeleted=t.isOk;HideLoading("#template_"+n.id)}})},recovery:function(n){return ShowLoading("#template_"+n.id),$.ajax({type:"POST",url:"/Template/Recovery",data:JSON.stringify(n),context:n,contentType:"application/json",dataType:"json",success:function(t){n.isDeleted=!t.isOk;HideLoading("#template_"+n.id)}})}}});